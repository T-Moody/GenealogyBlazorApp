@page "/admin/home"
@rendermode InteractiveAuto
@using GenealogyBlazorApp.Client.Features.Home.Components
@using GenealogyBlazorApp.Client.Features.Home.Models

<PageTitle>Admin - Home Page Editor</PageTitle>

<div class="vintage-editor">
    @if (State.IsLoading)
    {
        <div class="loading-overlay">
            <div class="spinner-vintage"></div>
            <p class="mt-3" style="font-family: 'Georgia', serif; color: var(--text-heritage);"><em>Loading editor...</em></p>
        </div>
    }
    else
    {
        <!-- Sticky Toolbar -->
        <div class="editor-toolbar">
            <h3 class="editor-title">Home Page Editor</h3>
            
            <div class="d-flex align-items-center gap-3">
                @if (!string.IsNullOrEmpty(SaveMessage))
                {
                    <div class="feedback-message @(IsError ? "feedback-error" : "feedback-success")">
                        @SaveMessage
                    </div>
                }
                
                <button class="btn-vintage" @onclick="SaveChanges" disabled="@IsSaving">
                    @if (IsSaving)
                    {
                        <span>Saving...</span>
                    }
                    else
                    {
                        <span>Save Changes</span>
                    }
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="editor-content container-fluid">
            <HomeHero State="State" IsEditor="true" />

            <div class="row mt-4" id="content-start">
                <div class="col-md-8">
                    <AboutSection State="State" IsEditor="true" />
                </div>
                <div class="col-md-4">
                    <Sidebar State="State" IsEditor="true" />
                </div>
            </div>
        </div>
        
        <!-- Saving Overlay -->
        @if (IsSaving)
        {
            <div class="loading-overlay" style="background-color: rgba(245, 245, 220, 0.5);">
                <div class="spinner-vintage"></div>
            </div>
        }
    }
</div>
